<section class="section section--menu menu-wrap" id="Valentine">
    <nav class="menu menu--valentine">
        <ul class="menu__list icon-list">
            <li class="menu__item menu__item--current"><a href="#" class="menu__link">Home</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Mon Espace</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Idées</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Projets</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Rechercher</a></li>

            <li class="menu__item"><a href="#" class="menu__link">Profil</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Se déconnecter</a></li>
        </ul>
    </nav>
    <button class="menu-button" id="open-button"></button>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.1/clipboard.min.js"></script>
<script>
    (function() {
        [].slice.call(document.querySelectorAll('.menu')).forEach(function(menu) {
            var menuItems = menu.querySelectorAll('.menu__link'),
                setCurrent = function(ev) {
                    ev.preventDefault();

                    var item = ev.target.parentNode; // li

                    // return if already current
                    if( item.classList.contains('menu__item--current') ) {
                        return false;
                    }
                    // remove current
                    menu.querySelector('.menu__item--current').classList.remove('menu__item--current');
                    // set current
                    item.classList.add( 'menu__item--current');
                };

            [].slice.call(menuItems).forEach(function(el) {
                el.addEventListener('click', setCurrent);
            });
        });

        [].slice.call(document.querySelectorAll('.link-copy')).forEach(function(link) {
            link.setAttribute('data-clipboard-text', location.protocol + '//' + location.host + location.pathname + '#' + link.parentNode.id);
            new Clipboard(link);
            link.addEventListener('click', function() {
                link.classList.add(link, 'link-copy--animate');
                setTimeout(function() {
                    link.classList.remove(link, 'link-copy--animate');
                }, 300);
            });
        });
    })(window);
</script>
